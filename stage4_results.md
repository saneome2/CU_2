# Результаты выполнения этапа 4: Дополнительные операции

## Описание
Добавлен режим вывода порядка загрузки зависимостей (topological sort) для заданного пакета. Используется алгоритм Kahn для вычисления порядка, где зависимости загружаются перед пакетом. Циклы обрабатываются с предупреждением о неполном порядке.

## Реализованная функциональность
- Topological sort с помощью Kahn's algorithm.
- Обнаружение циклов и вывод предупреждения.
- Новый флаг `--load-order` для вывода порядка.

## Демонстрация на тестовых случаях

### Случай 1: Простой граф без циклов (пакет A)
Файл `test_graph.txt`:
```
A: B C
B: D
C: D
D:
E: A
```

Команда:
```
python main.py --package-name A --repo-url test_graph.txt --test-mode --version dummy --load-order
```

Вывод:
```
Порядок загрузки зависимостей:
D
B
C
A
E
```

Порядок корректен: D (лист), затем B и C (зависят от D), затем A (зависит от B и C), затем E (зависит от A).

### Случай 2: Граф с циклом (пакет F)
Файл `test_graph.txt` (добавлены F: G, G: F).

Команда:
```
python main.py --package-name F --repo-url test_graph.txt --test-mode --version dummy --load-order
```

Вывод:
```
Цикл обнаружен, порядок загрузки неполный.
Порядок загрузки зависимостей:
D
B
C
A
E
```

Цикл F ↔ G делает невозможным полный topological order, поэтому выводится частичный порядок для достижимых узлов.

## Сравнение с реальным менеджером пакетов
Для Alpine APK: менеджер автоматически разрешает зависимости и устанавливает пакеты в topological порядке (зависимости первыми).

Пример: `apk add busybox` установит сначала `musl` (libc), затем `busybox`.

Наш инструмент для `busybox` выводит порядок: `so:libc.musl-x86_64.so.1`, `busybox`.

**Расхождения:**
- Мы выводим все из поля `D:` APKINDEX, включая shared libraries (so:...), которые не являются пакетами и не устанавливаются APK отдельно.
- APK работает только с пакетами, игнорируя libraries (они предоставляются пакетами).
- Для пакетов без зависимостей (например, `python3` в тесте) порядок trivial.

Это объясняется различием в данных: APKINDEX содержит сырые зависимости, а APK фильтрует и разрешает их на уровне пакетов.